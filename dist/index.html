<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="This is Morphe. An Android app that modifies other Android apps. And welcome to you, who has discovered Morphe.">
    <title>Morphe</title>
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="https://cloud.umami.is/script.js"
            data-website-id="faa54201-a249-4ddc-9732-88c6ac7fdf5f"></script>
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96"/>
    <link rel="icon" type="image/svg+xml" href="favicon.svg"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"/>
</head>
<body>
<main>
    <section class="section hero-section">
        <p class="description">From the developers that brought you the greatest modded YouTube apps,
            comes the next generation of patching</p>
        <img src="images/morphe_wordmark_light.svg" alt="Morphe" class="logo">

        <a href="http://TODO/FIXME" class="btn btn-primary">Download YouTube Morphe</a>
    </section>

    <section class="section social-links">
        <a href="https://github.com/MorpheApp" target="_blank"><img src="images/github.svg" alt="GitHub"></a>
        <a href="https://x.com/MorpheApp" target="_blank"><img src="images/X.svg" alt="X"></a>
        <a href="https://reddit.com/r/MorpheApp" target="_blank"><img src="images/reddit.svg" alt="Reddit"></a>
    </section>

    <section class="section">
        <a href="donate" class="link">Support us with a donation â†’</a>
    </section>

    <section class="section" id="faq-link-section">
        <a href="#" id="faq-toggle" class="link">Frequently asked questions â†’</a>
    </section>

    <div class="faq-section">
        <section class="faq-content" id="faq-content">
            <h2>Frequently Asked Questions</h2>
            <div class="faq-item">
                <h3>ðŸ“± What apps can Morphe patch?</h3>
                <p>You can patch any app you want. As long as you want YouTube or YouTube Music.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸ›¡ Is Morphe safe?</h3>
                <p>As safe as modifying obfuscated bytecode can be. All source code for Morphe is
                    open source, and free for anyone to inspect.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸ§± Will Morphe brick my phone?</h3>
                <p>Only if your phone decides to brick itself. Otherwise your device will be fine.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸ¤” Why the name Morphe?</h3>
                <p>Because "Android App Modification And Transformation Tool" (AAMATT) is not
                    very catchy. And because Morphe implies it morphs your apps.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸš€ Can I use Morphe to turn my app experience up to 11?</h3>
                <p>Yes, but don't blame Morphe if your app becomes too customized for
                    you to handle. It's recommended to customize up to your
                    preference level and no more.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸª„ Is Morphe magic? </h3>
                <p>No. But also yes.</p>
            </div>
            <div class="faq-item">
                <h3>ðŸ’– Can I contribute to Morphe?</h3>
                <p>Yes! See the contribution guidelines in our <a href="https://github.com/MorpheApp/">GitHub repo</a>. If you don't have any
                    development skills then we are always appreciative of <a href="donate" class="link">donations</a> to help pay the bills.</p>
            </div>
        </section>
    </div>
</main>

<script>
    /**
     * FAQ Toggle Functionality
     * 
     * This implementation fixes mobile clipping issues by:
     * 1. Using dynamic scrollHeight instead of static max-height (prevents content cutoff)
     * 2. Setting max-height to 'none' after transition completes (allows flexible content)
     * 3. Scrolling the FAQ section into view with smooth behavior
     * 
     * Issue context: On mobile browsers, FAQ content was being clipped because
     * static max-height values (e.g., 1000px) may not accommodate all content,
     * and overflow:hidden was preventing visibility of expanded items.
     */
    document.getElementById('faq-toggle').addEventListener('click', function(e) {
        e.preventDefault();
        const faqSection = document.getElementById('faq-content');
        const isOpening = !faqSection.classList.contains('open');

        if (isOpening) {
            // Calculate the actual content height dynamically to avoid clipping
            // This replaces static max-height values which can cause content cutoff on mobile
            const scrollHeight = faqSection.scrollHeight;
            // Calculate extra padding from CSS custom property (--faq-section-padding)
            // Default to 64px (2rem * 2 for top + bottom) if not available
            const rootStyles = getComputedStyle(document.documentElement);
            const sectionPadding = parseFloat(rootStyles.getPropertyValue('--faq-section-padding')) || 32;
            const extraPadding = sectionPadding * 2; // top + bottom padding
            faqSection.style.maxHeight = (scrollHeight + extraPadding) + 'px';
            faqSection.classList.add('open');

            // After transition completes, set max-height to none for flexible content
            // This ensures any dynamic content changes won't be clipped
            faqSection.addEventListener('transitionend', function onOpenTransitionEnd(event) {
                if (event.propertyName === 'max-height') {
                    faqSection.style.maxHeight = 'none';
                    // Scroll the FAQ toggle link into view so users can see the content
                    // Uses 'start' block to position FAQ at top of viewport
                    document.getElementById('faq-link-section').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    faqSection.removeEventListener('transitionend', onOpenTransitionEnd);
                }
            });
        } else {
            // When closing, first set a fixed max-height to enable smooth transition
            // Then use nested requestAnimationFrame to ensure the browser applies the
            // initial max-height before starting the closing animation
            const currentHeight = faqSection.scrollHeight;
            faqSection.style.maxHeight = currentHeight + 'px';
            // Double requestAnimationFrame ensures the browser has painted the initial state
            // before we trigger the transition to 0
            requestAnimationFrame(function() {
                requestAnimationFrame(function() {
                    faqSection.classList.remove('open');
                    faqSection.style.maxHeight = '0';
                });
            });
        }
    });
</script>

</body>
</html>
